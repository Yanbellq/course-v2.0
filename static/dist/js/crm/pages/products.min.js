import Button from"../components/button.js";document.addEventListener("DOMContentLoaded",function(){document.querySelector("#product-list-table")&&(console.log("Initializing product list page..."),loadProducts())});let pageHeaderActions=document.querySelector("#page-header-actions");async function loadProducts(){var e=document.querySelector("#product-list-body");document.querySelector("#product-list-table");if(e){e.innerHTML=`
        <tr>
            <td colspan="6" class="text-center">
                <div class="loading-spinner" style="display: inline-block; vertical-align: middle;">
                    <div class="spinner" style="width: 24px; height: 24px; border-width: 3px;"></div>
                </div>
                <span style="vertical-align: middle; margin-left: 10px;">Завантаження товарів...</span>
            </td>
        </tr>
    `;try{renderProducts((await PCManagement.apiRequest("/products/")).products,e),PCManagement.initDataTable("#product-list-table",{pageSize:15})}catch(t){console.error("Failed to load products:",t),e.innerHTML=`
            <tr>
                <td colspan="6" class="text-center text-error">
                    Не вдалося завантажити список товарів.
                </td>
            </tr>
        `}}}function renderProducts(t,e){t&&0!==t.length?(t=t.map(t=>{var e=PCManagement.formatCurrency(t.price),a=t.quantity_in_stock<=t.min_stock_level?"text-error":"";return`
            <tr data-product-id="${t.id}">
                <td><a href="/products/${t.id}/" class="font-semibold underline">${t.name}</a></td>
                <td>${t.category}</td>
                <td>${t.manufacturer||"—"}</td>
                <td>${e}</td>
                <td class="${a}">${t.quantity_in_stock}</td>
                <td class="dropdown-data">
                    <button type="button" class="dropdown-toggle">...</button>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="/products/${t.id}/edit/" class="btn btn--sm btn--secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="square-pen" class="lucide lucide-square-pen h-4 w-4">
                                    <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"></path>
                                </svg>
                                Редагувати
                            </a>
                        </li>
                        <li>
                            <button class="btn btn--sm btn--error w-full" data-action="delete" data-url="/products/${t.id}/" data-confirm="Ви впевнені, що хочете видалити товар ${t.name}?">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="trash-2" class="lucide lucide-trash-2 h-4 w-4">
                                    <path d="M10 11v6"></path><path d="M14 11v6"></path>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                                    <path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                                Видалити
                            </button>
                        </li>
                    </ul>
                </td>
            </tr>
        `}).join(""),e.innerHTML=t,document.querySelectorAll(".dropdown-data").forEach(t=>{var e=t.querySelector(".dropdown-toggle");let a=t.querySelector(".dropdown-menu");e.addEventListener("click",t=>{document.querySelectorAll(".dropdown-menu.active").forEach(t=>{t!==a&&t.classList.remove("active")}),a.classList.toggle("active")})}),document.addEventListener("click",t=>{t.target.closest(".dropdown-data")||document.querySelectorAll(".dropdown-menu.active").forEach(t=>{t.classList.remove("active")})})):e.innerHTML=`
            <tr>
                <td colspan="6" class="text-center">
                    <div>
                        <div class="flex items-center justify-center pt-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="package" class="lucide lucide-package h-10 w-10 text-gray-600">
                                <path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"></path>
                                <path d="M12 22V12"></path>
                                <polyline points="3.29 7 12 12 20.71 7"></polyline>
                                <path d="m7.5 4.27 9 5.15"></path>
                            </svg>
                        </div>
                        <h3 class="mt-2 text-base font-medium text-gray-900 text-center mt-4">Товари не знайдено</h3>
                        <p class="mt-1 text-sm text-gray-500 text-center pb-4 mt-2">
                            Спробуйте змінити параметри пошуку або створіть новий товар.
                        </p>
                    </div>
                </td>
            </tr>
        `}pageHeaderActions&&pageHeaderActions.insertAdjacentHTML("beforeend",Button("Додати товар","add","shadow-glow","plus",""));
//# sourceMappingURL=products.min.js.map
