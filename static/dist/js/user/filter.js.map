{"version":3,"names":[],"mappings":"","sources":["filter.js"],"sourcesContent":["'use strict'\r\n// Автосабміт фільтрів при зміні\r\nconst filterForm = document.getElementById('filter-form');\r\nconst categoryInputs = document.querySelectorAll('input[name=\"category\"]');\r\nconst brandInputs = document.querySelectorAll('input[name=\"brand\"]');\r\nconst productTypeInputs = document.querySelectorAll('input[name=\"product_type\"]');\r\nconst sortSelect = document.getElementById('sortSelect');\r\n\r\n// Двійний range-слайдер для ціни\r\nconst minRange = document.getElementById('min-range');\r\nconst maxRange = document.getElementById('max-range');\r\nconst minPriceVal = document.getElementById('price-min-val');\r\nconst maxPriceVal = document.getElementById('price-max-val');\r\nconst minGap = 5; // мінімальна різниця між значеннями\r\n\r\nvar thumbLeft = document.querySelector(\".filter__range-slider-thumb.left\");\r\nvar thumbRight = document.querySelector(\".filter__range-slider-thumb.right\");\r\nvar range = document.querySelector(\".filter__range-slider-range\");\r\n\r\nconst resetFiltersBtn = document.getElementById('reset-filters');\r\nconst resetPriceRangeBtn = document.getElementById('reset-price-range');\r\n\r\n// Скидання фільтрів при кліку на кнопку\r\nresetFiltersBtn.addEventListener('click', function () {\r\n    if (location.search !== '') location.search = '';\r\n});\r\n\r\n// Автоматичний submit при зміні категорії\r\ncategoryInputs.forEach(input => {\r\n    input.addEventListener('change', function () {\r\n        filterForm.submit();\r\n    });\r\n});\r\n\r\n// Автоматичний submit при зміні бренду\r\nbrandInputs.forEach(input => {\r\n    input.addEventListener('change', function () {\r\n        filterForm.submit();\r\n    });\r\n});\r\n\r\n// Автоматичний submit при зміні типу продукту\r\nproductTypeInputs.forEach(input => {\r\n    input.addEventListener('change', function () {\r\n        filterForm.submit();\r\n    });\r\n});\r\n\r\n// Автоматичний submit при зміні сортування\r\nif (sortSelect) {\r\n    sortSelect.addEventListener('change', function () {\r\n        filterForm.submit();\r\n    });\r\n}\r\n\r\nfunction setLeftValue() {\r\n    var _this = minRange,\r\n        min = parseInt(_this.min),\r\n        max = parseInt(_this.max);\r\n\r\n    _this.value = Math.min(parseInt(_this.value), parseInt(maxRange.value) - 1);\r\n\r\n    var percent = ((_this.value - min) / (max - min)) * 100;\r\n\r\n    thumbLeft.style.left = percent + \"%\";\r\n    range.style.left = percent + \"%\";\r\n}\r\nsetLeftValue();\r\n\r\nfunction setRightValue() {\r\n    var _this = maxRange,\r\n        min = parseInt(_this.min),\r\n        max = parseInt(_this.max);\r\n\r\n    _this.value = Math.max(parseInt(_this.value), parseInt(minRange.value) + 1);\r\n\r\n    var percent = ((_this.value - min) / (max - min)) * 100;\r\n\r\n    thumbRight.style.right = (100 - percent) + \"%\";\r\n    range.style.right = (100 - percent) + \"%\";\r\n}\r\nsetRightValue();\r\n\r\nminRange.addEventListener(\"input\", setLeftValue);\r\nmaxRange.addEventListener(\"input\", setRightValue);\r\n\r\nminRange.addEventListener(\"mouseover\", function () {\r\n    thumbLeft.classList.add(\"hover\");\r\n});\r\nminRange.addEventListener(\"mouseout\", function () {\r\n    thumbLeft.classList.remove(\"hover\");\r\n});\r\nminRange.addEventListener(\"mousedown\", function () {\r\n    thumbLeft.classList.add(\"active\");\r\n});\r\nminRange.addEventListener(\"mouseup\", function () {\r\n    thumbLeft.classList.remove(\"active\");\r\n});\r\n\r\nmaxRange.addEventListener(\"mouseover\", function () {\r\n    thumbRight.classList.add(\"hover\");\r\n});\r\nmaxRange.addEventListener(\"mouseout\", function () {\r\n    thumbRight.classList.remove(\"hover\");\r\n});\r\nmaxRange.addEventListener(\"mousedown\", function () {\r\n    thumbRight.classList.add(\"active\");\r\n});\r\nmaxRange.addEventListener(\"mouseup\", function () {\r\n    thumbRight.classList.remove(\"active\");\r\n});\r\n\r\nif (minRange && maxRange) {\r\n    const updateSlider = (event) => {\r\n        let minVal = parseFloat(minRange.value);\r\n        let maxVal = parseFloat(maxRange.value);\r\n\r\n        if (maxVal - minVal <= minGap) {\r\n            if (event.target === minRange) {\r\n                minRange.value = maxVal - minGap;\r\n            } else {\r\n                maxRange.value = minVal + minGap;\r\n            }\r\n        }\r\n\r\n        minPriceVal.textContent = minRange.value;\r\n        maxPriceVal.textContent = maxRange.value;\r\n    };\r\n\r\n    minRange.addEventListener('input', updateSlider);\r\n    maxRange.addEventListener('input', updateSlider);\r\n\r\n    // Автосабміт при відпусканні повзунка\r\n    [minRange, maxRange].forEach(slider => {\r\n        slider.addEventListener('change', () => filterForm.submit());\r\n    });\r\n}\r\n\r\n// Скидання цінового діапазону при кліку на кнопку\r\nresetPriceRangeBtn.addEventListener('click', function () {\r\n    minRange.value = 0;\r\n    maxRange.value = 2000;\r\n    minPriceVal.textContent = minRange.value;\r\n    maxPriceVal.textContent = maxRange.value;\r\n    setLeftValue();\r\n    setRightValue();\r\n    filterForm.submit();\r\n});"],"file":"filter.js"}