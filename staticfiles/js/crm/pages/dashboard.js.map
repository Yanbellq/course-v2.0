{"version":3,"names":[],"mappings":"","sources":["pages/dashboard.js"],"sourcesContent":["// static/src/js/pages/dashboard.js\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Цей скрипт виконується тільки на сторінці, де є елемент .dashboard-stats\n    if (document.querySelector('.dashboard-stats')) {\n        console.log('Initializing dashboard page...');\n        loadDashboardData();\n        initCharts();\n    }\n});\n\nfunction loadDashboardData() {\n    // У майбутньому тут будуть AJAX-запити до вашого Django API.\n    // Зараз використовуються \"заглушки\" (mock data).\n\n    // Mock-дані для статистики\n    const stats = {\n        productsCount: 156,\n        customersCount: 89,\n        monthlyRevenue: 450000,\n        activeRepairs: 12\n    };\n    updateStats(stats);\n\n    // Mock-дані для останніх продажів\n    const recentSales = [\n        { id: 1, title: 'Intel Core i9-14900K', customer: 'Олена Вовк', date: '2024-05-20', amount: 25000 },\n        { id: 2, title: 'NVIDIA RTX 4080 Super', customer: 'Андрій Коваль', date: '2024-05-19', amount: 52000 },\n        { id: 3, title: '32GB DDR5 Kingston FURY', customer: 'Ірина Мельник', date: '2024-05-18', amount: 4500 }\n    ];\n    renderRecentSales(recentSales);\n\n    // Mock-дані для активних ремонтів\n    const activeRepairs = [\n        { id: 1, title: 'Заміна термопасти MacBook Pro', customer: 'Сергій Пономар', date: '2024-05-18', status: 'Ремонтується', statusClass: 'warning' },\n        { id: 2, title: 'Діагностика ПК', customer: 'Марія Сидоренко', date: '2024-05-15', status: 'Діагностика', statusClass: 'info' },\n        { id: 3, title: 'Чистка ноутбука від пилу', customer: 'Віктор Бондаренко', date: '2024-05-14', status: 'Готово', statusClass: 'success' }\n    ];\n    renderActiveRepairs(activeRepairs);\n\n    // Mock-дані для товарів, що закінчуються\n    const lowStockProducts = [\n        { id: '674f1a2b8d4c5e1234567898', title: 'ASUS ROG Strix B760-F', current: 2, min: 5 },\n        { id: '674f1a2b8d4c5e1234567899', title: 'Corsair RM850x', current: 1, min: 3 },\n        { id: '674f1a2b8d4c5e123456789a', title: 'Kingston FURY 64GB DDR5', current: 4, min: 8 }\n    ];\n    renderLowStockProducts(lowStockProducts);\n}\n\nfunction updateStats(stats) {\n    document.querySelector('[data-stat=\"products-count\"]').textContent = stats.productsCount;\n    document.querySelector('[data-stat=\"customers-count\"]').textContent = stats.customersCount;\n    document.querySelector('[data-stat=\"monthly-revenue\"]').textContent = PCManagement.formatCurrency(stats.monthlyRevenue, 'UAH');\n    document.querySelector('[data-stat=\"active-repairs\"]').textContent = stats.activeRepairs;\n}\n\nfunction renderRecentSales(sales) {\n    const container = document.querySelector('#recent-sales');\n    if (!container) return;\n\n    const html = sales.map(sale => `\n        <div class=\"operation-item\">\n            <div class=\"operation-item__info\">\n                <h4 class=\"operation-item__title\">${sale.title}</h4>\n                <p class=\"operation-item__details\">${sale.customer} • ${PCManagement.formatShortDate(sale.date)}</p>\n            </div>\n            <div class=\"operation-item__amount\">${PCManagement.formatCurrency(sale.amount, 'UAH')}</div>\n        </div>\n    `).join('');\n\n    container.innerHTML = html;\n}\n\nfunction renderActiveRepairs(repairs) {\n    const container = document.querySelector('#active-repairs');\n    if (!container) return;\n\n    const html = repairs.map(repair => `\n        <div class=\"operation-item\">\n            <div class=\"operation-item__info\">\n                <h4 class=\"operation-item__title\">${repair.title}</h4>\n                <p class=\"operation-item__details\">${repair.customer} • ${PCManagement.formatShortDate(repair.date)}</p>\n                <span class=\"status-badge status-badge--${repair.statusClass}\">${repair.status}</span>\n            </div>\n        </div>\n    `).join('');\n\n    container.innerHTML = html;\n}\n\nfunction renderLowStockProducts(products) {\n    const container = document.querySelector('#low-stock-products');\n    const countEl = document.querySelector('#low-stock-count');\n    if (!container || !countEl) return;\n\n    countEl.textContent = `${products.length} позиції`;\n\n    const html = products.map(product => `\n        <div class=\"alert-item\">\n            <div class=\"alert-item__info\">\n                <h4 class=\"alert-item__title\">${product.title}</h4>\n                <p class=\"alert-item__details\">Залишок: ${product.current} шт. (мін: ${product.min} шт.)</p>\n            </div>\n            <button class=\"btn btn--sm btn--primary\" onclick=\"orderProduct('${product.id}')\">Замовити</button>\n        </div>\n    `).join('');\n\n    container.innerHTML = html;\n}\n\n\nfunction orderProduct(productId) {\n    console.log('Ordering product:', productId);\n    PCManagement.showNotification(`Замовлення товару ${productId}...`, 'info');\n    // Тут буде логіка замовлення товару через API\n    // PCManagement.apiRequest(`/api/products/${productId}/order`, { method: 'POST' });\n}\n// Робимо функцію глобальною, щоб її можна було викликати з HTML (onclick)\nwindow.orderProduct = orderProduct;\n\nfunction initCharts() {\n    // Ініціалізація графіків (потрібна бібліотека, наприклад, Chart.js)\n    // Перевіряємо, чи є Chart.js на сторінці\n    if (typeof Chart === 'undefined') {\n        console.warn('Chart.js is not loaded. Skipping chart initialization.');\n        return;\n    }\n\n    console.log('Initializing charts...');\n\n    // Графік продажів за тиждень\n    const salesChartCtx = document.getElementById('sales-chart');\n    if (salesChartCtx) {\n        new Chart(salesChartCtx, {\n            type: 'line',\n            data: {\n                labels: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Нд'],\n                datasets: [{\n                    label: 'Продажі',\n                    data: [12000, 19000, 8000, 15000, 21000, 30000, 25000],\n                    borderColor: 'var(--color-primary)',\n                    backgroundColor: 'rgba(37, 99, 235, 0.1)',\n                    fill: true,\n                    tension: 0.4\n                }]\n            },\n            options: { responsive: true, maintainAspectRatio: false }\n        });\n    }\n\n    // Графік категорій\n    const categoriesChartCtx = document.getElementById('categories-chart');\n    if (categoriesChartCtx) {\n        new Chart(categoriesChartCtx, {\n            type: 'doughnut',\n            data: {\n                labels: ['Процесори', 'Відеокарти', 'Пам\\'ять', 'Периферія'],\n                datasets: [{\n                    label: 'Топ категорії',\n                    data: [30, 45, 15, 10],\n                    backgroundColor: ['#2563eb', '#10b981', '#f59e0b', '#64748b']\n                }]\n            },\n            options: { responsive: true, maintainAspectRatio: false }\n        });\n    }\n}"],"file":"pages/dashboard.js"}