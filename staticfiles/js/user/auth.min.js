import showNotification from"./toast.js";import{env}from"./env.js";let authTabs=document.querySelectorAll(".auth-tab"),authContainers=document.querySelectorAll(".auth-form-container"),showRegisterBtn=(authTabs.forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.tab;authTabs.forEach(e=>e.classList.remove("active")),authContainers.forEach(e=>e.classList.remove("active")),t.classList.add("active"),document.getElementById(e+"Tab").classList.add("active")})}),document.getElementById("showRegister")),showLoginBtn=document.getElementById("showLogin"),loginForm=document.getElementById("loginForm"),registerForm=document.getElementById("registerForm"),userLoginForm=(showRegisterBtn&&showRegisterBtn.addEventListener("click",()=>{loginForm.classList.remove("active"),registerForm.classList.add("active")}),showLoginBtn&&showLoginBtn.addEventListener("click",()=>{registerForm.classList.remove("active"),loginForm.classList.add("active")}),document.getElementById("userLoginForm")),userRegisterForm=(userLoginForm&&userLoginForm.addEventListener("submit",e=>{e.preventDefault();var e=new FormData(userLoginForm),t=e.get("username"),i=e.get("password"),e=e.get("remember");t&&i?(console.log("User Login:",{username:t,password:i,remember:e}),i={type:"user",username:t,loginTime:(new Date).toISOString()},(e?localStorage:sessionStorage).setItem("user",JSON.stringify(i)),showNotification("Login successful!","success"),setTimeout(()=>{window.location.href="index.html"},1500)):showNotification("Please fill in all fields","error")}),document.getElementById("userRegisterForm")),regSubmitBtn=document.getElementById("reg-submit"),adminLoginForm=(userRegisterForm&&userRegisterForm.addEventListener("submit",e=>{e.preventDefault();var e=new FormData(userRegisterForm),t=e.get("username"),i=e.get("email"),o=e.get("password"),e=e.get("terms");t&&i&&o?o.length<6?showNotification("Password must be at least 6 characters","error"):e?(console.log("User Registration:",{username:t,email:i,password:o}),regSubmitBtn.disabled=!0,regSubmitBtn.innerText="Registering...",fetch(env.apiBaseUrl+"/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:i,password:o})}).then(e=>{201===e.status?showNotification("Registration successful!","success"):showNotification("Registration failed. Please try again.","error"),regSubmitBtn.disabled=!1,regSubmitBtn.innerText="Create Account",userRegisterForm.reset()})):showNotification("Please accept the terms and conditions","error"):showNotification("Please fill in all fields","error")}),document.getElementById("adminLoginForm"));adminLoginForm&&adminLoginForm.addEventListener("submit",e=>{e.preventDefault();var e=new FormData(adminLoginForm),t=e.get("email"),i=e.get("password"),e=e.get("remember");t&&i?"admin@electronic.com"===t&&"admin123"===i?(i={type:"admin",email:t,loginTime:(new Date).toISOString()},(e?localStorage:sessionStorage).setItem("admin",JSON.stringify(i)),showNotification("Admin login successful!","success"),setTimeout(()=>{window.location.href=env.apiBaseUrl+"/crm/"},1500)):showNotification("Invalid admin credentials","error"):showNotification("Please fill in all fields","error")}),document.querySelectorAll('input[type="password"]').forEach(e=>{var t=e.parentElement;let i=document.createElement("button");i.type="button",i.innerHTML=`<i data-lucide="eye-off" class='h-8 w-8'></i>`,i.style.cssText=`
        position: absolute;
        right: 15px;
        top: 69%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        opacity: 0.6;
    `,t.style.position="relative",t.appendChild(i),lucide.createIcons(),i.addEventListener("click",()=>{"password"===e.type?(e.type="text",i.innerHTML=`<i data-lucide="eye" class='h-8 w-8'></i>`):(e.type="password",i.innerHTML=`<i data-lucide="eye-off" class='h-8 w-8'></i>`),lucide.createIcons()})});
//# sourceMappingURL=auth.min.js.map
