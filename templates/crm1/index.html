{% extends 'crm/base.html' %}
{% load static %}


{% block title %}–ì–æ–ª–æ–≤–Ω–∞ | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–æ—ó —Ñ—ñ—Ä–º–∏{% endblock %}

{% block page_header %}
    <div class="page-header">
        <h1 class="page-header__title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</h1>
        <p class="page-header__subtitle">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–æ—ó —Ñ—ñ—Ä–º–∏</p>
    </div>
{% endblock %}

{% block content %}
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <section class="dashboard-stats">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-card__icon">üì¶</div>
                <div class="stat-card__content">
                    <h3 class="stat-card__title">–¢–æ–≤–∞—Ä—ñ–≤ –Ω–∞ —Å–∫–ª–∞–¥—ñ</h3>
                    <div class="stat-card__value" data-stat="products-count">...</div>
                    <p class="stat-card__description">–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–∑–∏—Ü—ñ–π</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-card__icon">üë•</div>
                <div class="stat-card__content">
                    <h3 class="stat-card__title">–ê–∫—Ç–∏–≤–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤</h3>
                    <div class="stat-card__value" data-stat="customers-count">...</div>
                    <p class="stat-card__description">–ó–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π –º—ñ—Å—è—Ü—å</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-card__icon">üí∞</div>
                <div class="stat-card__content">
                    <h3 class="stat-card__title">–í–∏—Ç–æ—Ä–≥ –∑–∞ –º—ñ—Å—è—Ü—å</h3>
                    <div class="stat-card__value" data-stat="monthly-revenue">...</div>
                    <p class="stat-card__description">–ì—Ä—É–¥–µ–Ω—å 2024</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-card__icon">üîß</div>
                <div class="stat-card__content">
                    <h3 class="stat-card__title">–ê–∫—Ç–∏–≤–Ω–∏—Ö —Ä–µ–º–æ–Ω—Ç—ñ–≤</h3>
                    <div class="stat-card__value" data-stat="active-repairs">...</div>
                    <p class="stat-card__description">–í —Ä–æ–±–æ—Ç—ñ –∑–∞—Ä–∞–∑</p>
                </div>
            </div>
        </div>
    </section>

    <!-- –®–≤–∏–¥–∫—ñ –¥—ñ—ó -->
    <section class="quick-actions">
        <h2 class="section-title">–®–≤–∏–¥–∫—ñ –¥—ñ—ó</h2>
        <div class="actions-grid">
            <a href="{% comment %}{% url 'crm:sale_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">üõí</div>
                <h3 class="action-card__title">–ù–æ–≤–∞ –ø—Ä–æ–¥–∞–∂–∞</h3>
                <p class="action-card__description">–û—Ñ–æ—Ä–º–∏—Ç–∏ –ø—Ä–æ–¥–∞–∂—É —Ç–æ–≤–∞—Ä—É</p>
            </a>

            <a href="{% comment %}{% url 'crm:customer_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">üë§</div>
                <h3 class="action-card__title">–î–æ–¥–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞</h3>
                <p class="action-card__description">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞</p>
            </a>

            <a href="{% comment %}{% url 'crm:repair_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">‚öôÔ∏è</div>
                <h3 class="action-card__title">–ù–æ–≤–∏–π —Ä–µ–º–æ–Ω—Ç</h3>
                <p class="action-card__description">–ü—Ä–∏–π–Ω—è—Ç–∏ —Ç–µ—Ö–Ω—ñ–∫—É –≤ —Ä–µ–º–æ–Ω—Ç</p>
            </a>

            <a href="{% comment %}{% url 'crm:contract_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">üìã</div>
                <h3 class="action-card__title">–ù–æ–≤–∏–π –¥–æ–≥–æ–≤—ñ—Ä</h3>
                <p class="action-card__description">–£–∫–ª–∞—Å—Ç–∏ –¥–æ–≥–æ–≤—ñ—Ä –∑ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–æ–º</p>
            </a>

            <a href="{% comment %}{% url 'crm:custom_pc_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">üñ•Ô∏è</div>
                <h3 class="action-card__title">–ó–±—ñ—Ä–∫–∞ –ü–ö</h3>
                <p class="action-card__description">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –∑–±—ñ—Ä–∫—É</p>
            </a>

            <a href="{% comment %}{% url 'crm:service_add' %}{% endcomment %}#" class="action-card">
                <div class="action-card__icon">üíª</div>
                <h3 class="action-card__title">–ü–æ—Å–ª—É–≥–∞ –ü–ó</h3>
                <p class="action-card__description">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º</p>
            </a>
        </div>
    </section>

    <!-- –û—Å—Ç–∞–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó -->
    <section class="recent-operations">
        <div class="operations-grid">
            <div class="operation-block">
                <div class="operation-block__header">
                    <h2 class="operation-block__title">–û—Å—Ç–∞–Ω–Ω—ñ –ø—Ä–æ–¥–∞–∂—ñ</h2>
                    <a href="{% comment %}{% url 'crm:sales_list' %}{% endcomment %}#" class="operation-block__link">–í—Å—ñ –ø—Ä–æ–¥–∞–∂—ñ</a>
                </div>
                <div class="operation-list" id="recent-sales">
                    <!-- –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>

            <div class="operation-block">
                <div class="operation-block__header">
                    <h2 class="operation-block__title">–ê–∫—Ç–∏–≤–Ω—ñ —Ä–µ–º–æ–Ω—Ç–∏</h2>
                    <a href="{% comment %}{% url 'crm:repairs_list' %}{% endcomment %}#" class="operation-block__link">–í—Å—ñ —Ä–µ–º–æ–Ω—Ç–∏</a>
                </div>
                <div class="operation-list" id="active-repairs">
                    <!-- –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- –ö—Ä–∏—Ç–∏—á–Ω—ñ –∑–∞–ø–∞—Å–∏ -->
    <section class="low-stock-alert">
        <div class="alert-block">
            <div class="alert-block__header">
                <h2 class="alert-block__title">‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ñ –∑–∞–ø–∞—Å–∏</h2>
                <span class="alert-block__count" id="low-stock-count">...</span>
            </div>
            <div class="alert-list" id="low-stock-products">
                <!-- –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </section>

    <!-- –ì—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ -->
    <section class="analytics">
        <div class="analytics-grid">
            <div class="chart-block">
                <h2 class="chart-block__title">–ü—Ä–æ–¥–∞–∂—ñ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å</h2>
                <div class="chart-container">
                    <canvas id="sales-chart" width="400" height="200"></canvas>
                </div>
            </div>

            <div class="chart-block">
                <h2 class="chart-block__title">–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
                <div class="chart-container">
                    <canvas id="categories-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
    {# –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ —Å–∫—Ä–∏–ø—Ç, —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π –¥–ª—è —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏. Gulp –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–æ–º–ø—ñ–ª—é—î –π–æ–≥–æ –≤ main.js #}
    <script type="module" src="{% static 'js/crm/pages/dashboard.js' %}"></script>
    <!-- –î–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}